pipeline {
	agent {
		docker {
			image 'ubuntu:v1_m'
		}
	}
	stages {
		stage('Build') {
			steps {
				sh '''
				cd $WORKSPACE
				python2 -V
				python2 example.py
				echo "hello world"
				hostname
				pwd 
				ls'''
				
			}
		}
	}
	post {
		success {
			withCredentials([usernamePassword(credentialsId: 'maheedhar', passwordVariable: 'password', usernameVariable: 'username')]){
			sh '''
			git config user.name $username
			git config user.email $usermail
			git config --global http.proxy http://proxy-chain.intel.com:911
			echo $GIT_BRANCH
			git branch -a
			git checkout main
			git checkout $GIT_BRANCH -- example.py
			git commit -m "Pushig file from $GIT_BRANCH to main."
			git push https://${username}:${password}@$url'''
			
		}}
	}
}
